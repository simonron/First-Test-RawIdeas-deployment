<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="robots" content="noindex" />
	<title>Raw Ideas News Hacker App test</title>
	<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
	<script src="jquery.tmpl.min.js" type="text/javascript"></script>
	<script src="https://cdn.firebase.com/js/client/2.2.1/firebase.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular-route.min.js"></script>



	<script>
		var newsItem = new Array();
		var title = "blank";
		var url = "blank";
		var count = 0;
		var score = "blank";
		var app = angular.module("myApp", []);
		var ref = new Firebase("https://hacker-news.firebaseio.com/v0/");

		for (var i = 0; i < 10; i++) {
			getNews(i);
		};
		//console.log(title,score,url,count);

		function getNews(i) {
			var itemRef;
			ref.child('topstories').child(i).on('value', function(snapshot) {
				if (itemRef) {
					itemRef.off();
				}
				var id = snapshot.val();
				itemRef = ref.child('item').child(id);
				itemRef.on('value', function(snapshot) {
					item = snapshot.val();
					 title = item.title;
						 url = item.url;
						 score = item.score;
						  count = i;
					$("div.hidden").remove();
				//newsItem[count] = ["xxx","yyy","zzz"];
					//var newsItem= new Array();
						 newsItem = [count,title,score,url];
					/*console.log("count="+count+" " +newsItem[count]);
						console.log("title="+title+" " +newsItem[count][1]);
						console.log("score="+score+" " +newsItem[count][2]);
						console.log("url="+url+" " +newsItem[count][3]);*/
					console.log("count="+count+" " +newsItem);
					//console.log(title,score,url,count);
					
					$(".clientTemplate").tmpl().appendTo("body");
						return title,score,url,count,newsItem
			
				});
			});

		};
		
		
		
		
/*		
		
		    function ContentCtrl($scope, $http) {
        "use strict";
    <pre><code>$scope.url = 'content.json';
    $scope.content = [];
    $scope.fetchContent = function() {
        $http.get($scope.url).then(function(result){
            $scope.content = result.data;
        });
    }
    $scope.fetchContent();
    </code></pre>
    }
		*/
		
		
		
		
		
					app.controller("myCtrl", function($scope) {
					/*	$scope.newtest = [{
							title: title,
							url: url,
							count: count,
							score: score,
						}]*/
						//console.log(title,score,url,count);
						$scope.title = title;
							$scope.url = url;
							$scope.count = count;
							$scope.score = score;
						$scope.myItems = [
    title,
    url,
    score,
   count
    ];
					$scope.firstName = "John";
			$scope.lastName = "Doe";
			$scope.fred = "testing";
			$scope.newsItem=newsItem;
						//$scope.$apply();

			$scope.newthing = [{
				test: "bbbbb",
				fred: "11"
			},
												{
				test: "aaaa",
				fred: "44"
			},
												{
				test: "vvvv",
				fred: "88"
			},{
				title: title,
				url: url
			},
												{
				test: "vvvv",
				fred: "88"
			}];
						
						
/*						 "use strict";
    <pre><code>$scope.dataurl = item;
    $scope.content = [];
    $scope.fetchContent = function() {
        $http.get($scope.dataurl).then(function(result){
            $scope.content = result.data;
        });
    }
    $scope.fetchContent();
    </code></pre>*/
						
						
						
					});
	</script>
</head>

<body>
	<div class="hidden">
		When this is working, this text will not be seen - please wait.</div>

	
			<ul>
			<li ng-repeat="x in newthing | orderBy:sortorder | filter:query">
					Order by -
			<select ng-model="sortorder" class="input-small ">
				<option selected value="test ">test</option>
				<option value="fred ">fred</option>
				<option value="id ">ID</option>
			</select>
			Show -
			<select ng-model="query.level" class="input-small ">
				<option selected value="">All</option>
				<option value="test">test</option>
				<option value="fred">fred</option>
				<option value="Advanced">advanced</option>
			</select>
				
				
		<script class="clientTemplate" type="text/x-jquery-tmpl">
		News item ${count} is <a href=$ {url} target="_blank"> ${title} </a> and has a score of ${score} <br>
		???? newsItem array is ${newsItem}!!!!<br><BR>
		<br>
		
	</script>
				

					


				
				
  <div ng-app="myApp" ng-init="qty=1;cost=2" ng-controller="myCtrl">


		  <b>Invoice:</b>
  <div>
    Quantity: <input type="number" min="0" ng-model="qty">
  </div>
  <div>
    Costs: <input type="number" min="0" ng-model="cost">
  </div>
  <div>
    <b>Total:</b> {{qty * cost | currency}}
  </div>		
				

		

				{{myItems}}{{score}}
				{{title}}
				{{url}}
				{{count}}<br>
		{{fred}} {{ firstName + " " + lastName }}
		<br>
	<ul>
			<li ng-repeat="x in newtest">
				
	<!--			{{x.count+ ', ' +x.title+ ', ' +x.url+ ', ' +x.score+ ', '+x.fred}}-->

			xxx	{{ x.test + ', ' + x.fred +', '+ x.title + ', ' + x.url } }www
	</li>
		
	
		</ul>
	</div>
				{{score}}
				{{title}}
				{{url}}
				{{count}}
<script>
//document.write(newsItem[0][1]);				
</script>
</body>

</html>

<script>
	document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')
</script>